<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title>Meeting Time Selector</title>

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="assets/css/normalize.css">
  <link rel="stylesheet" href="assets/css/skeleton.css">

<style>
    textarea {
        font-family: monospace;
        font-size: 10px;
    }
    .box:hover {
        background: #eee;
        cursor: pointer;
    }
    .box.selecting {
        background: #484;
    }
    .box.selecting:hover {
        background: #484;
    }
    .box.selected {
        background: #6a6;
    }
    .box.selected:hover {
        background: #373;
    }
    .box.selected.selecting {
        background: #eee;
    }
    .box.selected.selecting:hover {
        background: #eee;
    }
    th, td {
        padding: 0px;
        border-right: 1px solid #E1E1E1;
    }
    td {
        width: 12%;
    }
    thead th {
        text-align: center;
    }
    tbody th {
        top: 12px;
        position: relative;
     box-sizing: border-box;
    }
</style>

</head>
<body>
  
  
        <p></p>
  <div class="container">
    <div class="row">
      <div class="columns ten">
        <textarea class="u-full-width" id="output"></textarea>
    </div>
    <div class="columns two">
        <button class="u-full-width" onclick="updateCSV();">Compute</button>
    </div>
    </div>
<table class="u-full-width" id="table">
    <thead>
        <tr>
            <th>Local Time</th>
            <th>Monday</th>
            <th>Tuesday</th>
            <th>Wednesday</th>
            <th>Thursday</th>
            <th>Friday</th>
            <th>Saturday</th>
            <th>Sunday</th>
        </tr>
    </thead>
    <tbody>

<tr>
<th class='time'>0</th>
<td class='box' id='0-0'></td>
<td class='box' id='1-0'></td>
<td class='box' id='2-0'></td>
<td class='box' id='3-0'></td>
<td class='box' id='4-0'></td>
<td class='box' id='5-0'></td>
<td class='box' id='6-0'></td>
</tr>
<tr>
<th class='time'>30</th>
<td class='box' id='0-1'></td>
<td class='box' id='1-1'></td>
<td class='box' id='2-1'></td>
<td class='box' id='3-1'></td>
<td class='box' id='4-1'></td>
<td class='box' id='5-1'></td>
<td class='box' id='6-1'></td>
</tr>
<tr>
<th class='time'>60</th>
<td class='box' id='0-2'></td>
<td class='box' id='1-2'></td>
<td class='box' id='2-2'></td>
<td class='box' id='3-2'></td>
<td class='box' id='4-2'></td>
<td class='box' id='5-2'></td>
<td class='box' id='6-2'></td>
</tr>
<tr>
<th class='time'>90</th>
<td class='box' id='0-3'></td>
<td class='box' id='1-3'></td>
<td class='box' id='2-3'></td>
<td class='box' id='3-3'></td>
<td class='box' id='4-3'></td>
<td class='box' id='5-3'></td>
<td class='box' id='6-3'></td>
</tr>
<tr>
<th class='time'>120</th>
<td class='box' id='0-4'></td>
<td class='box' id='1-4'></td>
<td class='box' id='2-4'></td>
<td class='box' id='3-4'></td>
<td class='box' id='4-4'></td>
<td class='box' id='5-4'></td>
<td class='box' id='6-4'></td>
</tr>
<tr>
<th class='time'>150</th>
<td class='box' id='0-5'></td>
<td class='box' id='1-5'></td>
<td class='box' id='2-5'></td>
<td class='box' id='3-5'></td>
<td class='box' id='4-5'></td>
<td class='box' id='5-5'></td>
<td class='box' id='6-5'></td>
</tr>
<tr>
<th class='time'>180</th>
<td class='box' id='0-6'></td>
<td class='box' id='1-6'></td>
<td class='box' id='2-6'></td>
<td class='box' id='3-6'></td>
<td class='box' id='4-6'></td>
<td class='box' id='5-6'></td>
<td class='box' id='6-6'></td>
</tr>
<tr>
<th class='time'>210</th>
<td class='box' id='0-7'></td>
<td class='box' id='1-7'></td>
<td class='box' id='2-7'></td>
<td class='box' id='3-7'></td>
<td class='box' id='4-7'></td>
<td class='box' id='5-7'></td>
<td class='box' id='6-7'></td>
</tr>
<tr>
<th class='time'>240</th>
<td class='box' id='0-8'></td>
<td class='box' id='1-8'></td>
<td class='box' id='2-8'></td>
<td class='box' id='3-8'></td>
<td class='box' id='4-8'></td>
<td class='box' id='5-8'></td>
<td class='box' id='6-8'></td>
</tr>
<tr>
<th class='time'>270</th>
<td class='box' id='0-9'></td>
<td class='box' id='1-9'></td>
<td class='box' id='2-9'></td>
<td class='box' id='3-9'></td>
<td class='box' id='4-9'></td>
<td class='box' id='5-9'></td>
<td class='box' id='6-9'></td>
</tr>
<tr>
<th class='time'>300</th>
<td class='box' id='0-10'></td>
<td class='box' id='1-10'></td>
<td class='box' id='2-10'></td>
<td class='box' id='3-10'></td>
<td class='box' id='4-10'></td>
<td class='box' id='5-10'></td>
<td class='box' id='6-10'></td>
</tr>
<tr>
<th class='time'>330</th>
<td class='box' id='0-11'></td>
<td class='box' id='1-11'></td>
<td class='box' id='2-11'></td>
<td class='box' id='3-11'></td>
<td class='box' id='4-11'></td>
<td class='box' id='5-11'></td>
<td class='box' id='6-11'></td>
</tr>
<tr>
<th class='time'>360</th>
<td class='box' id='0-12'></td>
<td class='box' id='1-12'></td>
<td class='box' id='2-12'></td>
<td class='box' id='3-12'></td>
<td class='box' id='4-12'></td>
<td class='box' id='5-12'></td>
<td class='box' id='6-12'></td>
</tr>
<tr>
<th class='time'>390</th>
<td class='box' id='0-13'></td>
<td class='box' id='1-13'></td>
<td class='box' id='2-13'></td>
<td class='box' id='3-13'></td>
<td class='box' id='4-13'></td>
<td class='box' id='5-13'></td>
<td class='box' id='6-13'></td>
</tr>
<tr>
<th class='time'>420</th>
<td class='box' id='0-14'></td>
<td class='box' id='1-14'></td>
<td class='box' id='2-14'></td>
<td class='box' id='3-14'></td>
<td class='box' id='4-14'></td>
<td class='box' id='5-14'></td>
<td class='box' id='6-14'></td>
</tr>
<tr>
<th class='time'>450</th>
<td class='box' id='0-15'></td>
<td class='box' id='1-15'></td>
<td class='box' id='2-15'></td>
<td class='box' id='3-15'></td>
<td class='box' id='4-15'></td>
<td class='box' id='5-15'></td>
<td class='box' id='6-15'></td>
</tr>
<tr>
<th class='time'>480</th>
<td class='box' id='0-16'></td>
<td class='box' id='1-16'></td>
<td class='box' id='2-16'></td>
<td class='box' id='3-16'></td>
<td class='box' id='4-16'></td>
<td class='box' id='5-16'></td>
<td class='box' id='6-16'></td>
</tr>
<tr>
<th class='time'>510</th>
<td class='box' id='0-17'></td>
<td class='box' id='1-17'></td>
<td class='box' id='2-17'></td>
<td class='box' id='3-17'></td>
<td class='box' id='4-17'></td>
<td class='box' id='5-17'></td>
<td class='box' id='6-17'></td>
</tr>
<tr>
<th class='time'>540</th>
<td class='box' id='0-18'></td>
<td class='box' id='1-18'></td>
<td class='box' id='2-18'></td>
<td class='box' id='3-18'></td>
<td class='box' id='4-18'></td>
<td class='box' id='5-18'></td>
<td class='box' id='6-18'></td>
</tr>
<tr>
<th class='time'>570</th>
<td class='box' id='0-19'></td>
<td class='box' id='1-19'></td>
<td class='box' id='2-19'></td>
<td class='box' id='3-19'></td>
<td class='box' id='4-19'></td>
<td class='box' id='5-19'></td>
<td class='box' id='6-19'></td>
</tr>
<tr>
<th class='time'>600</th>
<td class='box' id='0-20'></td>
<td class='box' id='1-20'></td>
<td class='box' id='2-20'></td>
<td class='box' id='3-20'></td>
<td class='box' id='4-20'></td>
<td class='box' id='5-20'></td>
<td class='box' id='6-20'></td>
</tr>
<tr>
<th class='time'>630</th>
<td class='box' id='0-21'></td>
<td class='box' id='1-21'></td>
<td class='box' id='2-21'></td>
<td class='box' id='3-21'></td>
<td class='box' id='4-21'></td>
<td class='box' id='5-21'></td>
<td class='box' id='6-21'></td>
</tr>
<tr>
<th class='time'>660</th>
<td class='box' id='0-22'></td>
<td class='box' id='1-22'></td>
<td class='box' id='2-22'></td>
<td class='box' id='3-22'></td>
<td class='box' id='4-22'></td>
<td class='box' id='5-22'></td>
<td class='box' id='6-22'></td>
</tr>
<tr>
<th class='time'>690</th>
<td class='box' id='0-23'></td>
<td class='box' id='1-23'></td>
<td class='box' id='2-23'></td>
<td class='box' id='3-23'></td>
<td class='box' id='4-23'></td>
<td class='box' id='5-23'></td>
<td class='box' id='6-23'></td>
</tr>
<tr>
<th class='time'>720</th>
<td class='box' id='0-24'></td>
<td class='box' id='1-24'></td>
<td class='box' id='2-24'></td>
<td class='box' id='3-24'></td>
<td class='box' id='4-24'></td>
<td class='box' id='5-24'></td>
<td class='box' id='6-24'></td>
</tr>
<tr>
<th class='time'>750</th>
<td class='box' id='0-25'></td>
<td class='box' id='1-25'></td>
<td class='box' id='2-25'></td>
<td class='box' id='3-25'></td>
<td class='box' id='4-25'></td>
<td class='box' id='5-25'></td>
<td class='box' id='6-25'></td>
</tr>
<tr>
<th class='time'>780</th>
<td class='box' id='0-26'></td>
<td class='box' id='1-26'></td>
<td class='box' id='2-26'></td>
<td class='box' id='3-26'></td>
<td class='box' id='4-26'></td>
<td class='box' id='5-26'></td>
<td class='box' id='6-26'></td>
</tr>
<tr>
<th class='time'>810</th>
<td class='box' id='0-27'></td>
<td class='box' id='1-27'></td>
<td class='box' id='2-27'></td>
<td class='box' id='3-27'></td>
<td class='box' id='4-27'></td>
<td class='box' id='5-27'></td>
<td class='box' id='6-27'></td>
</tr>
<tr>
<th class='time'>840</th>
<td class='box' id='0-28'></td>
<td class='box' id='1-28'></td>
<td class='box' id='2-28'></td>
<td class='box' id='3-28'></td>
<td class='box' id='4-28'></td>
<td class='box' id='5-28'></td>
<td class='box' id='6-28'></td>
</tr>
<tr>
<th class='time'>870</th>
<td class='box' id='0-29'></td>
<td class='box' id='1-29'></td>
<td class='box' id='2-29'></td>
<td class='box' id='3-29'></td>
<td class='box' id='4-29'></td>
<td class='box' id='5-29'></td>
<td class='box' id='6-29'></td>
</tr>
<tr>
<th class='time'>900</th>
<td class='box' id='0-30'></td>
<td class='box' id='1-30'></td>
<td class='box' id='2-30'></td>
<td class='box' id='3-30'></td>
<td class='box' id='4-30'></td>
<td class='box' id='5-30'></td>
<td class='box' id='6-30'></td>
</tr>
<tr>
<th class='time'>930</th>
<td class='box' id='0-31'></td>
<td class='box' id='1-31'></td>
<td class='box' id='2-31'></td>
<td class='box' id='3-31'></td>
<td class='box' id='4-31'></td>
<td class='box' id='5-31'></td>
<td class='box' id='6-31'></td>
</tr>
<tr>
<th class='time'>960</th>
<td class='box' id='0-32'></td>
<td class='box' id='1-32'></td>
<td class='box' id='2-32'></td>
<td class='box' id='3-32'></td>
<td class='box' id='4-32'></td>
<td class='box' id='5-32'></td>
<td class='box' id='6-32'></td>
</tr>
<tr>
<th class='time'>990</th>
<td class='box' id='0-33'></td>
<td class='box' id='1-33'></td>
<td class='box' id='2-33'></td>
<td class='box' id='3-33'></td>
<td class='box' id='4-33'></td>
<td class='box' id='5-33'></td>
<td class='box' id='6-33'></td>
</tr>
<tr>
<th class='time'>1020</th>
<td class='box' id='0-34'></td>
<td class='box' id='1-34'></td>
<td class='box' id='2-34'></td>
<td class='box' id='3-34'></td>
<td class='box' id='4-34'></td>
<td class='box' id='5-34'></td>
<td class='box' id='6-34'></td>
</tr>
<tr>
<th class='time'>1050</th>
<td class='box' id='0-35'></td>
<td class='box' id='1-35'></td>
<td class='box' id='2-35'></td>
<td class='box' id='3-35'></td>
<td class='box' id='4-35'></td>
<td class='box' id='5-35'></td>
<td class='box' id='6-35'></td>
</tr>
<tr>
<th class='time'>1080</th>
<td class='box' id='0-36'></td>
<td class='box' id='1-36'></td>
<td class='box' id='2-36'></td>
<td class='box' id='3-36'></td>
<td class='box' id='4-36'></td>
<td class='box' id='5-36'></td>
<td class='box' id='6-36'></td>
</tr>
<tr>
<th class='time'>1110</th>
<td class='box' id='0-37'></td>
<td class='box' id='1-37'></td>
<td class='box' id='2-37'></td>
<td class='box' id='3-37'></td>
<td class='box' id='4-37'></td>
<td class='box' id='5-37'></td>
<td class='box' id='6-37'></td>
</tr>
<tr>
<th class='time'>1140</th>
<td class='box' id='0-38'></td>
<td class='box' id='1-38'></td>
<td class='box' id='2-38'></td>
<td class='box' id='3-38'></td>
<td class='box' id='4-38'></td>
<td class='box' id='5-38'></td>
<td class='box' id='6-38'></td>
</tr>
<tr>
<th class='time'>1170</th>
<td class='box' id='0-39'></td>
<td class='box' id='1-39'></td>
<td class='box' id='2-39'></td>
<td class='box' id='3-39'></td>
<td class='box' id='4-39'></td>
<td class='box' id='5-39'></td>
<td class='box' id='6-39'></td>
</tr>
<tr>
<th class='time'>1200</th>
<td class='box' id='0-40'></td>
<td class='box' id='1-40'></td>
<td class='box' id='2-40'></td>
<td class='box' id='3-40'></td>
<td class='box' id='4-40'></td>
<td class='box' id='5-40'></td>
<td class='box' id='6-40'></td>
</tr>
<tr>
<th class='time'>1230</th>
<td class='box' id='0-41'></td>
<td class='box' id='1-41'></td>
<td class='box' id='2-41'></td>
<td class='box' id='3-41'></td>
<td class='box' id='4-41'></td>
<td class='box' id='5-41'></td>
<td class='box' id='6-41'></td>
</tr>
<tr>
<th class='time'>1260</th>
<td class='box' id='0-42'></td>
<td class='box' id='1-42'></td>
<td class='box' id='2-42'></td>
<td class='box' id='3-42'></td>
<td class='box' id='4-42'></td>
<td class='box' id='5-42'></td>
<td class='box' id='6-42'></td>
</tr>
<tr>
<th class='time'>1290</th>
<td class='box' id='0-43'></td>
<td class='box' id='1-43'></td>
<td class='box' id='2-43'></td>
<td class='box' id='3-43'></td>
<td class='box' id='4-43'></td>
<td class='box' id='5-43'></td>
<td class='box' id='6-43'></td>
</tr>
<tr>
<th class='time'>1320</th>
<td class='box' id='0-44'></td>
<td class='box' id='1-44'></td>
<td class='box' id='2-44'></td>
<td class='box' id='3-44'></td>
<td class='box' id='4-44'></td>
<td class='box' id='5-44'></td>
<td class='box' id='6-44'></td>
</tr>
<tr>
<th class='time'>1350</th>
<td class='box' id='0-45'></td>
<td class='box' id='1-45'></td>
<td class='box' id='2-45'></td>
<td class='box' id='3-45'></td>
<td class='box' id='4-45'></td>
<td class='box' id='5-45'></td>
<td class='box' id='6-45'></td>
</tr>
<tr>
<th class='time'>1380</th>
<td class='box' id='0-46'></td>
<td class='box' id='1-46'></td>
<td class='box' id='2-46'></td>
<td class='box' id='3-46'></td>
<td class='box' id='4-46'></td>
<td class='box' id='5-46'></td>
<td class='box' id='6-46'></td>
</tr>
<tr>
<th class='time'>1410</th>
<td class='box' id='0-47'></td>
<td class='box' id='1-47'></td>
<td class='box' id='2-47'></td>
<td class='box' id='3-47'></td>
<td class='box' id='4-47'></td>
<td class='box' id='5-47'></td>
<td class='box' id='6-47'></td>
</tr>



    </tbody>
</table>

      </div>
  </div>
</div>


<script>

function array2d(rows) {
  var arr = [];
  for (var i=0;i<rows;i++) {
     arr[i] = [0, 0, 0, 0, 0, 0, 0];
  }
  return arr;
}

function hasClass(ele, cls) {
  return !!ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele, cls) {
  if (!hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele, cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleClass(ele, cls) {
    if (hasClass(ele,cls))
        removeClass(ele,cls);
    else
        addClass(ele,cls);
}

function updateCSV() {
    var output = "\tMonday\tTuesday\tWednesday\tThursday\tFriday\tSaturday\tSunday\t\n";
    for (var t = 0; t < 48; t++) {
        output += Math.floor(t / 2) + ":" + ((t % 2) * 3) + "0\t";
        for (var d = 0; d < 7; d++) {
            var box = document.getElementById(d + "-" + t)
            if (hasClass(box, "selected")) {
                output += "1\t"; 
            } else {
                output += "0\t";
            }
        }
        output += "\n";
    }
    document.getElementById("output").innerHTML = output;
}

var basetime = new Date("2019-09-09T00:00:00Z");
var times = document.getElementsByClassName("time");
for (var i = 0; i < times.length; i++) {
    var date = new Date();
    date.setTime(basetime.getTime() + parseInt(times[i].innerHTML) * 60000);
    var text = date.toLocaleTimeString().replace(":00",'');
    if (date.getDay() == 0) {
        text += " (prev day)"
    }
    if (date.getDay() == 2) {
        text += " (next day)"
    }
    times[i].innerHTML = text;
}

var boxes = document.getElementsByClassName("box");
dragging = false;
initial_cors = [0,0];
state = array2d(48);

function mousedown(event) {
    event.preventDefault();
    dragging = true;
    addClass(event.target, "selecting");
    initial_cors = event.target.id.split("-");
    state = array2d(48);
    state[initial_cors[1]][initial_cors[0]] = true;
}

function mouseenter(event) {
    event.preventDefault();
    if (dragging) {

        var final_cors = event.target.id.split("-");
        var d_start, d_end, t_start, t_end;
        if (parseInt(final_cors[0]) >= parseInt(initial_cors[0])) {
            d_start = parseInt(initial_cors[0]);
            d_end = parseInt(final_cors[0]);
        } else {
            d_start = parseInt(final_cors[0]);
            d_end = parseInt(initial_cors[0]);
        }
        if (parseInt(final_cors[1]) >= parseInt(initial_cors[1])) {
            t_start = parseInt(initial_cors[1]);
            t_end = parseInt(final_cors[1]);
        } else {
            t_start = parseInt(final_cors[1]);
            t_end = parseInt(initial_cors[1]);
        }
        state = array2d(48);
        for (var t = t_start; t <= t_end; t++) {
            for (var d = d_start; d <= d_end; d++) {
                state[t][d] = true;
            }
        }
        for (var t = 0; t < 48; t++) {
            for (var d = 0; d < 7; d++) {
                if (state[t][d])
                    addClass(document.getElementById(d+"-"+t), "selecting");
                else
                    removeClass(document.getElementById(d+"-"+t), "selecting");
            }
        }
    }
}

function mouseup(event) {
    //event.preventDefault();
    if (dragging) {
        dragging = false;
        for (var d = 0; d < 7; d++) {
            for (var t = 0; t < 48; t++) {
                if (state[t][d]) {
                    removeClass(document.getElementById(d+"-"+t), "selecting");
                    toggleClass(document.getElementById(d+"-"+t), "selected");
                }
            }
        }
    }
}

for (var i = 0; i < boxes.length; i++) {
    boxes[i].onmousedown = mousedown;
    boxes[i].onmouseenter = mouseenter;
}

document.onmouseup = mouseup;

</script>

</body>
</html>
